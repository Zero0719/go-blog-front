{"version":3,"sources":["webpack:///./src/views/articles/Form.vue?d838","webpack:///./src/utils/request.js","webpack:///src/views/articles/Form.vue","webpack:///./src/views/articles/Form.vue?ad8e","webpack:///./src/views/articles/Form.vue","webpack:///./node_modules/core-js/modules/es.object.keys.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","errorCount","on","clearError","_l","item","index","key","_v","_s","_e","model","value","callback","$$v","title","expression","toolbars","body","submit","staticRenderFns","authRequest","options","user","JSON","parse","localStorage","getItem","headers","Authorization","token","axios","request","name","data","errors","bold","italic","header","underline","strikethrough","mark","superscript","subscript","quote","ol","ul","link","imagelink","code","table","fullscreen","readmodel","htmlcode","help","undo","redo","trash","save","navigation","alignleft","aligncenter","alignright","subfield","preview","computed","methods","method","url","status","background","content","console","log","err","component","$","toObject","nativeKeys","fails","FAILS_ON_PRIMITIVES","target","stat","forced","keys","it"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,OAAO,CAACE,YAAY,kDAAkDC,MAAM,CAAC,OAAS,KAAK,CAAEP,EAAIQ,WAAW,EAAGJ,EAAG,QAAQ,CAACG,MAAM,CAAC,KAAO,QAAQ,SAAW,IAAIE,GAAG,CAAC,WAAWT,EAAIU,aAAaV,EAAIW,GAAIX,EAAU,QAAE,SAASY,EAAKC,GAAO,OAAOT,EAAG,IAAI,CAACU,IAAID,GAAO,CAACb,EAAIe,GAAGf,EAAIgB,GAAGJ,SAAW,GAAGZ,EAAIiB,KAAKb,EAAG,QAAQ,CAACE,YAAY,OAAOC,MAAM,CAAC,KAAO,QAAQ,YAAc,SAASW,MAAM,CAACC,MAAOnB,EAAS,MAAEoB,SAAS,SAAUC,GAAMrB,EAAIsB,MAAMD,GAAKE,WAAW,WAAWnB,EAAG,eAAe,CAACG,MAAM,CAAC,SAAWP,EAAIwB,UAAUN,MAAM,CAACC,MAAOnB,EAAQ,KAAEoB,SAAS,SAAUC,GAAMrB,EAAIyB,KAAKJ,GAAKE,WAAW,UAAUnB,EAAG,SAAS,CAACE,YAAY,OAAOC,MAAM,CAAC,KAAO,WAAWE,GAAG,CAAC,MAAQT,EAAI0B,SAAS,CAAC1B,EAAIe,GAAG,SAAS,MAC5zBY,EAAkB,G,iCCCP,GACbC,YADa,SACAC,GACX,IAAMC,EAAOC,KAAKC,MAAMC,aAAaC,QAAQ,SAI7C,OAHAL,EAAQM,QAAU,CAChBC,cAAe,UAAYN,EAAKO,OAE3BC,IAAMC,QAAQV,KCOzB,GACEW,KAAM,cACNC,KAFF,WAGI,MAAO,CACLnB,MAAO,GACPG,KAAM,GACNiB,OAAQ,GACRlB,SAAU,CACRmB,MAAM,EACNC,QAAQ,EACRC,QAAQ,EACRC,WAAW,EACXC,eAAe,EACfC,MAAM,EACNC,aAAa,EACbC,WAAW,EACXC,OAAO,EACPC,IAAI,EACJC,IAAI,EACJC,MAAM,EACNC,WAAW,EACXC,MAAM,EACNC,OAAO,EACPC,YAAY,EACZC,WAAW,EACXC,UAAU,EACVC,MAAM,EAENC,MAAM,EACNC,MAAM,EACNC,OAAO,EACPC,MAAM,EAENC,YAAY,EAEZC,WAAW,EACXC,aAAa,EACbC,YAAY,EAEZC,UAAU,EACVC,SAAS,KAIfC,SAAU,CACRhE,WAAY,WACV,OAAO,OAAb,2BAGEiE,QAAS,CACP/C,OADJ,WACA,WACM,EAAN,aACQgD,OAAQ,OACRC,IAAK,YACLlC,KAAM,CACJnB,MAAOrB,KAAKqB,MACZG,KAAMxB,KAAKwB,QAErB,kBACQ,IAAR,iBACQ,EAAR,gCACA,mBACQ,IAAR,oBACQ,OAAQmD,GACN,KAAK,IACH,EAAZ,0BACY,EAAZ,uBACY,MACF,KAAK,IACH,EAAZ,mCACY,MACF,QACE,EAAZ,gBACcC,YAAY,EACZC,QAAS,mBAGfC,QAAQC,IAAIC,SC5FyU,I,YCOzVC,EAAY,eACd,EACAnF,EACA4B,GACA,EACA,KACA,WACA,MAIa,aAAAuD,E,8BClBf,IAAIC,EAAI,EAAQ,QACZC,EAAW,EAAQ,QACnBC,EAAa,EAAQ,QACrBC,EAAQ,EAAQ,QAEhBC,EAAsBD,GAAM,WAAcD,EAAW,MAIzDF,EAAE,CAAEK,OAAQ,SAAUC,MAAM,EAAMC,OAAQH,GAAuB,CAC/DI,KAAM,SAAcC,GAClB,OAAOP,EAAWD,EAASQ","file":"js/chunk-69450be0.f12faecb.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"article-form\"},[_c('form',{staticClass:\"mx-auto w-3/4 p-5 bg-white rounded-lg shadow-lg\",attrs:{\"action\":\"\"}},[(_vm.errorCount>0)?_c('Alert',{attrs:{\"type\":\"error\",\"closable\":\"\"},on:{\"on-close\":_vm.clearError}},_vm._l((_vm.errors),function(item,index){return _c('p',{key:index},[_vm._v(_vm._s(item))])}),0):_vm._e(),_c('Input',{staticClass:\"my-2\",attrs:{\"size\":\"large\",\"placeholder\":\"请输入标题\"},model:{value:(_vm.title),callback:function ($$v) {_vm.title=$$v},expression:\"title\"}}),_c('mavon-editor',{attrs:{\"toolbars\":_vm.toolbars},model:{value:(_vm.body),callback:function ($$v) {_vm.body=$$v},expression:\"body\"}}),_c('Button',{staticClass:\"my-2\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\"提交\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axios from 'axios'\r\n\r\nexport default {\r\n  authRequest (options) {\r\n    const user = JSON.parse(localStorage.getItem('user'))\r\n    options.headers = {\r\n      Authorization: 'Bearer ' + user.token\r\n    }\r\n    return axios.request(options)\r\n  }\r\n}\r\n","<template>\r\n  <div class=\"article-form\">\r\n    <form action=\"\" class=\"mx-auto w-3/4 p-5 bg-white rounded-lg shadow-lg\">\r\n      <Alert type=\"error\" v-if=\"errorCount>0\" closable @on-close=\"clearError\">\r\n        <p v-for=\"(item,index) in errors\" :key=\"index\">{{ item }}</p>\r\n      </Alert>\r\n      <Input class=\"my-2\" v-model=\"title\" size=\"large\" placeholder=\"请输入标题\" />\r\n      <mavon-editor :toolbars=\"toolbars\" v-model=\"body\"/>\r\n      <Button class=\"my-2\" type=\"primary\" @click=\"submit\">提交</Button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport req from '@/utils/request.js'\r\nexport default {\r\n  name: 'ArticleForm',\r\n  data () {\r\n    return {\r\n      title: '',\r\n      body: '',\r\n      errors: {},\r\n      toolbars: {\r\n        bold: true, // 粗体\r\n        italic: true, // 斜体\r\n        header: true, // 标题\r\n        underline: true, // 下划线\r\n        strikethrough: true, // 中划线\r\n        mark: true, // 标记\r\n        superscript: true, // 上角标\r\n        subscript: true, // 下角标\r\n        quote: true, // 引用\r\n        ol: true, // 有序列表\r\n        ul: true, // 无序列表\r\n        link: true, // 链接\r\n        imagelink: false, // 图片链接\r\n        code: true, // code\r\n        table: true, // 表格\r\n        fullscreen: true, // 全屏编辑\r\n        readmodel: true, // 沉浸式阅读\r\n        htmlcode: true, // 展示html源码\r\n        help: true, // 帮助\r\n        /* 1.3.5 */\r\n        undo: true, // 上一步\r\n        redo: true, // 下一步\r\n        trash: true, // 清空\r\n        save: false, // 保存（触发events中的save事件）\r\n        /* 1.4.2 */\r\n        navigation: true, // 导航目录\r\n        /* 2.1.8 */\r\n        alignleft: true, // 左对齐\r\n        aligncenter: true, // 居中\r\n        alignright: true, // 右对齐\r\n        /* 2.2.1 */\r\n        subfield: true, // 单双栏模式\r\n        preview: true // 预览\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    errorCount: function () {\r\n      return (Object.keys(this.errors)).length\r\n    }\r\n  },\r\n  methods: {\r\n    submit () {\r\n      req.authRequest({\r\n        method: 'post',\r\n        url: '/articles',\r\n        data: {\r\n          title: this.title,\r\n          body: this.body\r\n        }\r\n      }).then(res => {\r\n        const id = res.data.data.id\r\n        this.$router.push('/articles/' + id)\r\n      }).catch(err => {\r\n        const status = err.response.status\r\n        switch (status) {\r\n          case 401:\r\n            this.$store.dispatch('logout')\r\n            this.$router.push('/login')\r\n            break\r\n          case 422:\r\n            this.errors = err.response.data.data.errors\r\n            break\r\n          default:\r\n            this.$Message.error({\r\n              background: true,\r\n              content: '服务器发生错误，请联系管理员'\r\n            })\r\n        }\r\n        console.log(err)\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Form.vue?vue&type=template&id=2c0b5d88&scoped=true&\"\nimport script from \"./Form.vue?vue&type=script&lang=js&\"\nexport * from \"./Form.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2c0b5d88\",\n  null\n  \n)\n\nexport default component.exports","var $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar fails = require('../internals/fails');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.github.io/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n"],"sourceRoot":""}