{"version":3,"sources":["webpack:///./src/views/Register.vue?73f2","webpack:///src/views/Register.vue","webpack:///./src/views/Register.vue?382a","webpack:///./src/views/Register.vue","webpack:///./node_modules/core-js/modules/es.object.keys.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","type","indexOf","_k","keyCode","key","login","model","value","callback","$$v","nick_name","expression","email","password","errorCount","clearError","_l","item","index","_v","_s","_e","register","staticRenderFns","name","data","errors","computed","beforeRouteEnter","next","vm","$store","state","user","$router","push","methods","$http","method","url","status","background","content","err","response","msg","component","$","toObject","nativeKeys","fails","FAILS_ON_PRIMITIVES","target","stat","forced","keys","it"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,6CAA6C,CAACF,EAAG,OAAO,CAACE,YAAY,kDAAkDC,MAAM,CAAC,OAAS,IAAIC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAIA,EAAOC,KAAKC,QAAQ,QAAQX,EAAIY,GAAGH,EAAOI,QAAQ,QAAQ,GAAGJ,EAAOK,IAAI,SAAkB,KAAcd,EAAIe,MAAMN,MAAW,CAACL,EAAG,QAAQ,CAACE,YAAY,OAAOC,MAAM,CAAC,OAAS,cAAc,KAAO,QAAQ,YAAc,SAASS,MAAM,CAACC,MAAOjB,EAAa,UAAEkB,SAAS,SAAUC,GAAMnB,EAAIoB,UAAUD,GAAKE,WAAW,eAAejB,EAAG,QAAQ,CAACE,YAAY,OAAOC,MAAM,CAAC,OAAS,WAAW,KAAO,QAAQ,YAAc,SAASS,MAAM,CAACC,MAAOjB,EAAS,MAAEkB,SAAS,SAAUC,GAAMnB,EAAIsB,MAAMH,GAAKE,WAAW,WAAWjB,EAAG,QAAQ,CAACE,YAAY,OAAOC,MAAM,CAAC,OAAS,WAAW,KAAO,QAAQ,KAAO,WAAW,SAAW,GAAG,YAAc,SAASS,MAAM,CAACC,MAAOjB,EAAY,SAAEkB,SAAS,SAAUC,GAAMnB,EAAIuB,SAASJ,GAAKE,WAAW,cAAerB,EAAIwB,WAAW,EAAGpB,EAAG,QAAQ,CAACG,MAAM,CAAC,KAAO,QAAQ,SAAW,IAAIC,GAAG,CAAC,WAAWR,EAAIyB,aAAazB,EAAI0B,GAAI1B,EAAU,QAAE,SAAS2B,EAAKC,GAAO,OAAOxB,EAAG,IAAI,CAACU,IAAIc,GAAO,CAAC5B,EAAI6B,GAAG7B,EAAI8B,GAAGH,SAAW,GAAG3B,EAAI+B,KAAK3B,EAAG,SAAS,CAACE,YAAY,OAAOC,MAAM,CAAC,KAAO,WAAWC,GAAG,CAAC,MAAQR,EAAIgC,WAAW,CAAChC,EAAI6B,GAAG,SAAS,MAC3yCI,EAAkB,GCctB,G,UAAA,CACEC,KAAM,WACNC,KAFF,WAGI,MAAO,CACLf,UAAW,GACXE,MAAO,GACPC,SAAU,GACVa,OAAQ,KAGZC,SAAU,CACRb,WAAY,WACV,OAAO,OAAb,2BAGEc,iBAAkB,SAApB,OACIC,GAAK,SAAT,GACUC,EAAGC,OAAOC,MAAMC,MAClBH,EAAGI,QAAQC,KAAK,SAItBC,QAAS,CACPd,SADJ,WACA,WACM/B,KAAK8C,MAAM,CACTC,OAAQ,OACRC,IAAK,SACLd,KAAM,CACJf,UAAWnB,KAAKmB,UAChBE,MAAOrB,KAAKqB,MACZC,SAAUtB,KAAKsB,YAEzB,kBACQ,EAAR,0BACA,mBACQ,IAAR,oBACQ,OAAQ2B,GACN,KAAK,IACH,EAAZ,gBACcC,YAAY,EACZC,QAASC,EAAIC,SAASnB,KAAKoB,MAE7B,MACF,KAAK,IACH,EAAZ,mCACY,MACF,QACE,EAAZ,gBACcJ,YAAY,EACZC,QAAS,wBAKnB3B,WAhCJ,WAiCMxB,KAAKmC,OAAS,OCtE8T,I,YCO9UoB,EAAY,eACd,EACAzD,EACAkC,GACA,EACA,KACA,WACA,MAIa,aAAAuB,E,8BClBf,IAAIC,EAAI,EAAQ,QACZC,EAAW,EAAQ,QACnBC,EAAa,EAAQ,QACrBC,EAAQ,EAAQ,QAEhBC,EAAsBD,GAAM,WAAcD,EAAW,MAIzDF,EAAE,CAAEK,OAAQ,SAAUC,MAAM,EAAMC,OAAQH,GAAuB,CAC/DI,KAAM,SAAcC,GAClB,OAAOP,EAAWD,EAASQ","file":"js/chunk-5327a28c.e5a1ee13.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"register flex items-center justify-center\"},[_c('form',{staticClass:\"mx-auto w-1/4 p-5 bg-white rounded-lg shadow-lg\",attrs:{\"action\":\"\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.login($event)}}},[_c('Input',{staticClass:\"my-2\",attrs:{\"prefix\":\"ios-contact\",\"size\":\"large\",\"placeholder\":\"请输入昵称\"},model:{value:(_vm.nick_name),callback:function ($$v) {_vm.nick_name=$$v},expression:\"nick_name\"}}),_c('Input',{staticClass:\"my-2\",attrs:{\"prefix\":\"ios-mail\",\"size\":\"large\",\"placeholder\":\"请输入邮箱\"},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}}),_c('Input',{staticClass:\"my-2\",attrs:{\"prefix\":\"ios-lock\",\"size\":\"large\",\"type\":\"password\",\"password\":\"\",\"placeholder\":\"请输入密码\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),(_vm.errorCount>0)?_c('Alert',{attrs:{\"type\":\"error\",\"closable\":\"\"},on:{\"on-close\":_vm.clearError}},_vm._l((_vm.errors),function(item,index){return _c('p',{key:index},[_vm._v(_vm._s(item))])}),0):_vm._e(),_c('Button',{staticClass:\"my-2\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.register}},[_vm._v(\"登录\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"register flex items-center justify-center\">\r\n    <form action=\"\" class=\"mx-auto w-1/4 p-5 bg-white rounded-lg shadow-lg\" @keyup.enter=\"login\">\r\n      <Input prefix=\"ios-contact\" class=\"my-2\" v-model=\"nick_name\" size=\"large\" placeholder=\"请输入昵称\" />\r\n      <Input prefix=\"ios-mail\" class=\"my-2\" v-model=\"email\" size=\"large\" placeholder=\"请输入邮箱\" />\r\n      <Input prefix=\"ios-lock\" class=\"my-2\" v-model=\"password\" size=\"large\" type=\"password\" password placeholder=\"请输入密码\" />\r\n      <Alert type=\"error\" v-if=\"errorCount>0\" closable @on-close=\"clearError\">\r\n        <p v-for=\"(item,index) in errors\" :key=\"index\">{{ item }}</p>\r\n      </Alert>\r\n      <Button class=\"my-2\" type=\"primary\" @click=\"register\">登录</Button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Register',\r\n  data () {\r\n    return {\r\n      nick_name: '',\r\n      email: '',\r\n      password: '',\r\n      errors: {}\r\n    }\r\n  },\r\n  computed: {\r\n    errorCount: function () {\r\n      return (Object.keys(this.errors)).length\r\n    }\r\n  },\r\n  beforeRouteEnter: (to, from, next) => {\r\n    next(vm => {\r\n      if (vm.$store.state.user) {\r\n        vm.$router.push('/')\r\n      }\r\n    })\r\n  },\r\n  methods: {\r\n    register () {\r\n      this.$http({\r\n        method: 'post',\r\n        url: '/users',\r\n        data: {\r\n          nick_name: this.nick_name,\r\n          email: this.email,\r\n          password: this.password\r\n        }\r\n      }).then(res => {\r\n        this.$router.push('/login')\r\n      }).catch(err => {\r\n        const status = err.response.status\r\n        switch (status) {\r\n          case 403:\r\n            this.$Message.error({\r\n              background: true,\r\n              content: err.response.data.msg\r\n            })\r\n            break\r\n          case 422:\r\n            this.errors = err.response.data.data.errors\r\n            break\r\n          default:\r\n            this.$Message.error({\r\n              background: true,\r\n              content: '服务器发生错误，请联系管理员'\r\n            })\r\n        }\r\n      })\r\n    },\r\n    clearError () {\r\n      this.errors = {}\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Register.vue?vue&type=template&id=7ea4b17f&scoped=true&\"\nimport script from \"./Register.vue?vue&type=script&lang=js&\"\nexport * from \"./Register.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7ea4b17f\",\n  null\n  \n)\n\nexport default component.exports","var $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar fails = require('../internals/fails');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.github.io/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n"],"sourceRoot":""}